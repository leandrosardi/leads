<%
	msgerr = params[:msgerr]
	err = params[:err]
	msg = params[:msg]
%>
<% if msgerr!=nil %>
	<div class="alert alert-error">
		<a href="#" class="close" data-dismiss="alert"><i class='icon-remove-sign'></i></a><%=msgerr.to_s.encode_html%>
	</div>
<% end # err %>

<% if err!=nil %>
	<div class="alert alert-error">
		<%=err.to_s.encode_html%>
	</div>
<% end # err %>

<% if msg!=nil %>
	<div class="alert alert-info">
		<a href="#" class="close" data-dismiss="alert"><i class='icon-remove-sign'></i></a><%=msg.encode_html%>
	</div>
<% end # msg %>

<section class="box" height='500px' align='center' valign='middle'>
	<br/>
	<section class='row-fluid'>
		<p style='font-size:28pt'><b>STEP 1:</b> Filter by Job Position</p>
	</section>
	<br/>
	<section class='row-fluid'>
		<p style='font-size:14pt'>Choose One Or More Of The Available Job Positions.</p>
	</section>
	<br/>
	<form method='post' action='/leads/filter_step1'>
		<section class='row-fluid'>
			<table align='center' valign='middle' cellspacing="1px" cellpadding="5px">
			<%
				arPositions = Leads::JOBPOSITIONS
				arPositions.uniq!
				n = 0
				while (n<arPositions.size)
				%>
				<tr valign='middle' style='vertical-align:middle;' >
					<%
					checked=""
					if (session[arPositions[n].to_sym].to_s.size>0)
						checked="checked"
					end
					%>
					<td width='50px' style='vertical-align:middle;' align='center'><input type='checkbox' style='font-size:28pt;transform:scale(2.5, 2.5);' value='<%=arPositions[n]%>' id='<%=arPositions[n]%>' name='<%=arPositions[n]%>' <%=checked%>></td>
					<td width='50px' style='vertical-align:bottom;' align='left'><p style='font-size:14pt'><%=arPositions[n]%></p></td>
					<td width='50px'></td>
					<%
					n=n+1
					if (n<arPositions.size)
						checked=""
						if (session[arPositions[n].to_sym].to_s.size>0)
							checked="checked"
						end
					%>
					<td width='50px' style='vertical-align:middle;' align='center'><input type='checkbox' style='font-size:28pt;transform:scale(2.5, 2.5);' value='<%=arPositions[n]%>' id='<%=arPositions[n]%>' name='<%=arPositions[n]%>' <%=checked%>></td>
					<td width='50px' style='vertical-align:bottom;' align='left'><p style='font-size:14pt'><%=arPositions[n]%></p></td>
					<td width='50px'></td>
					<%
					end

					n=n+1
					if (n<arPositions.size)
						checked=""
						if (session[arPositions[n].to_sym].to_s.size>0)
							checked="checked"
						end
					%>
					<td width='50px' style='vertical-align:middle;' align='center'><input type='checkbox' style='font-size:28pt;transform:scale(2.5, 2.5);' value='<%=arPositions[n]%>' id='<%=arPositions[n]%>' name='<%=arPositions[n]%>' <%=checked%>></td>
					<td width='50px' style='vertical-align:bottom;' align='left'><p style='font-size:14pt'><%=arPositions[n]%></p></td>
					<%
					end

					n=n+1
					%>
				</tr>
				<%
				end # while
				%>
			
				<tr valign='middle'>
					<td align='right' colspan=8>
						<br/>
						<p style='font-size:11px;'>Need Custom Job Position? <a href='/leads/tripwire'><b>Try Premium <i class="icon-long-arrow-right"></i></b></a></p>
					</td>
				</tr>
			</table>
		</section>	
		<br/>
		<section class='row-fluid'>
			<button class="btn btn-primary btn-large" id="step1-next" disabled>Next <i class="icon-long-arrow-right"></i></button>&nbsp;&nbsp;
		</section>
	</form>
</section>

<script type="text/javascript" charset="utf-8">

	$(document).ready(function() {

		set_button_state();
		$("input[type='checkbox']").on('change', function() {
			set_button_state();
		});

	});

	function validate_checkbox(){
		return $('input[type="checkbox"]:checked').length > 0;
	}

	function set_button_state(){
		if (validate_checkbox() === true)
		{
			$("#step1-next").removeAttr("disabled");
		}
		else
		{
			$("#step1-next").attr("disabled","disabled");
		}
	}
	
</script>