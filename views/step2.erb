<%
	msgerr = params[:msgerr]
	err = params[:err]
	msg = params[:msg]
%>
<% if msgerr!=nil %>
	<div class="alert alert-error">
		<a href="#" class="close" data-dismiss="alert"><i class='icon-remove-sign'></i></a><%=msgerr.to_s.encode_html%>
	</div>
<% end # err %>

<% if err!=nil %>
	<div class="alert alert-error">
		<%=err.to_s.encode_html%>
	</div>
<% end # err %>

<% if msg!=nil %>
	<div class="alert alert-info">
		<a href="#" class="close" data-dismiss="alert"><i class='icon-remove-sign'></i></a><%=msg.encode_html%>
	</div>
<% end # msg %>

<section class="box" height='500px' align='center' valign='middle'>
	<br/>
	<section class='row-fluid'>
		<p style='font-size:28pt'><b>STEP 2:</b> Filter by Industry</p>
	</section>
	<br/>
	<section class='row-fluid'>
		<p style='font-size:14pt'>Write an Industry to Filter By.</p>
	</section>
	<br/>
	<form method='post' action='/leads/filter_step2'>
	<section class='row-fluid'>
		<div class='span3'></div>
		<div class='span6' style="margin-left: 80px;">
				<input  style='font-size:14pt;height:45px;width:550px;text-align:left; ' type="text" class="awesomplete" name="industry_name" id="industry_name" list="industries_list" placeholder="Start writing your Industry here" autocomplete="false" value="" tabindex="6">
			<datalist id="industries_list">
				<!-- TODO: iterate of table of industries industries here -->
				<% Leads::FlIndustry.all.each do |industry| %>
					<option value="<%= industry.name %>"> <%= industry.name %> </option>
				<% end %>
			</datalist>
		</div>
	</section>
	<br/>
	<br/>
	<div align="center">
		<a href="/leads/step1" class="btn btn-large"><i class="icon-long-arrow-left"></i> Back</a>&nbsp;&nbsp;
		<button id="step2-next" class="btn btn-primary btn-large">Next <i class="icon-long-arrow-right"></i></button>&nbsp;&nbsp;
	</div>
	</form>
</section>

<script type="text/javascript" charset="utf-8">

	$(document).ready(function() {

		set_button_state();
		$("#industry_name").on('change', function() {
			set_button_state();
		});

	});

	function valid_industry(){
		return $('#industry_name').val() !== '';
	}

	function set_button_state(){
		if (valid_industry() === true)
		{
			$("#step2-next").removeAttr("disabled");
		}
		else
		{
			$("#step2-next").attr("disabled","disabled");
		}
	}

</script>